import type { NextApiRequest, NextApiResponse } from "next";

import { printful } from "../../../lib/printful-client";

type Data = {
  id: string;
  price: number;
  url: string;
};

type Error = {
  errors: { key: string; message: string }[];
};


const sample = {
  "sync_product": {
    "id": 303929065,
    "external_id": "64208caa717469",
    "name": "Unisex Hoodie",
    "variants": 7,
    "synced": 7,
    "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
    "is_ignored": false
  },
  "sync_variants": [
    {
      "id": 3823450248,
      "external_id": "64208caa717559",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - XS",
      "synced": true,
      "variant_id": 10869,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "47.50",
      "sku": "64208CAA71426_XS",
      "currency": "USD",
      "product": {
        "variant_id": 10869,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10869_1582103277.jpg",
        "name": "All-Over Print Unisex Hoodie (XS)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    },
    {
      "id": 3823450249,
      "external_id": "64208caa7175a1",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - S",
      "synced": true,
      "variant_id": 10870,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "47.50",
      "sku": "64208CAA71426_S",
      "currency": "USD",
      "product": {
        "variant_id": 10870,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10870_1582103274.jpg",
        "name": "All-Over Print Unisex Hoodie (S)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    },
    {
      "id": 3823450250,
      "external_id": "64208caa7175e8",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - M",
      "synced": true,
      "variant_id": 10871,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "47.50",
      "sku": "64208CAA71426_M",
      "currency": "USD",
      "product": {
        "variant_id": 10871,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10871_1582103273.jpg",
        "name": "All-Over Print Unisex Hoodie (M)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    },
    {
      "id": 3823450251,
      "external_id": "64208caa717627",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - L",
      "synced": true,
      "variant_id": 10872,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "47.50",
      "sku": "64208CAA71426_L",
      "currency": "USD",
      "product": {
        "variant_id": 10872,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10872_1582103272.jpg",
        "name": "All-Over Print Unisex Hoodie (L)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    },
    {
      "id": 3823450252,
      "external_id": "64208caa717669",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - XL",
      "synced": true,
      "variant_id": 10873,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "47.50",
      "sku": "64208CAA71426_XL",
      "currency": "USD",
      "product": {
        "variant_id": 10873,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10873_1582103276.jpg",
        "name": "All-Over Print Unisex Hoodie (XL)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    },
    {
      "id": 3823450253,
      "external_id": "64208caa7176a6",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - 2XL",
      "synced": true,
      "variant_id": 10874,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "49.00",
      "sku": "64208CAA71426_2XL",
      "currency": "USD",
      "product": {
        "variant_id": 10874,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10874_1582103270.jpg",
        "name": "All-Over Print Unisex Hoodie (2XL)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    },
    {
      "id": 3823450254,
      "external_id": "64208caa7176e9",
      "sync_product_id": 303929065,
      "name": "Unisex Hoodie - 3XL",
      "synced": true,
      "variant_id": 10875,
      "main_category_id": 28,
      "warehouse_product_variant_id": null,
      "retail_price": "49.00",
      "sku": "64208CAA71426_3XL",
      "currency": "USD",
      "product": {
        "variant_id": 10875,
        "product_id": 388,
        "image": "https://files.cdn.printful.com/products/388/10874_1582103270.jpg",
        "name": "All-Over Print Unisex Hoodie (3XL)"
      },
      "files": [
        {
          "id": 542864505,
          "type": "default",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864505/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864501,
          "type": "back",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864501/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864500,
          "type": "sleeve_right",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864500/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864492,
          "type": "sleeve_left",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864492/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864495,
          "type": "pocket",
          "hash": null,
          "url": null,
          "filename": "c93a9b7c332af6c120cc9ab08511e315.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854753,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864495/c93a9b7c332af6c120cc9ab08511e315_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864503,
          "type": "hood",
          "hash": null,
          "url": null,
          "filename": "0463376462747b63d6d7aadbcca06d5e.png",
          "mime_type": "image/png",
          "size": 0,
          "width": 5550,
          "height": 5550,
          "dpi": 150,
          "status": "ok",
          "created": 1679854754,
          "thumbnail_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_thumb.png",
          "preview_url": "https://files.cdn.printful.com/printfile-preview/542864503/0463376462747b63d6d7aadbcca06d5e_preview.png",
          "visible": false,
          "is_temporary": true
        },
        {
          "id": 542864531,
          "type": "preview",
          "hash": "55898b9d37d6d02c15cff9afc3356ca8",
          "url": null,
          "filename": "all-over-print-unisex-hoodie-white-front-64208ca2dc551.png",
          "mime_type": "image/png",
          "size": 1024643,
          "width": 1000,
          "height": 1000,
          "dpi": null,
          "status": "ok",
          "created": 1679854762,
          "thumbnail_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_thumb.png",
          "preview_url": "https://files.cdn.printful.com/files/558/55898b9d37d6d02c15cff9afc3356ca8_preview.png",
          "visible": false,
          "is_temporary": false
        }
      ],
      "options": [
        {
          "id": "stitch_color",
          "value": "white"
        }
      ],
      "is_ignored": false
    }
  ]
}

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data | Error>
) {
  const { img } = req.query;

  const product = { ...sample }
  product.sync_product.thumbnail_url = img
  for (let i = 0; i < product.sync_variants.length; i++) {
    const v = product.sync_variants[i]
    v.product.image = img
    v.files = v.files.map(f => ({
      url: img
    }))
  }



  try {
    //const { result } = await printful.get(`store/products/303929065`);
    //const { result } = await printful.post(`store/products`, sample);
    //const { result } = await printful.get(`store/variants`);

    //res.setHeader("Cache-Control", "s-maxage=3600, stale-while-revalidate");

    res.status(200).json(product);
  } catch ({ error }) {
    console.log(error);
    res.status(404).json({
      errors: [
        {
          key: error?.message,
          message: error?.message,
        },
      ],
    });
  }
}
